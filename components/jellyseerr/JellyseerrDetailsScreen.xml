<?xml version="1.0" encoding="utf-8"?>
<component name="JellyseerrDetailsScreen" extends="JFScreen">
    <script type="text/brightscript" uri="pkg:/source/utils/JellyseerrUtils.bs" />
    <script type="text/brightscript" uri="pkg:/source/api/sdk.bs" />
    <script type="text/brightscript" uri="pkg:/source/api/Items.bs" />
    <script type="text/brightscript" uri="pkg:/source/api/Image.bs" />
    <script type="text/brightscript" uri="pkg:/source/utils/misc.bs" />
    <script type="text/brightscript" uri="pkg:/source/utils/deviceCapabilities.bs" />
    <script type="text/brightscript" uri="pkg:/source/ShowScenes.bs" />
    <script type="text/brightscript" uri="pkg:/source/enums/ImageType.bs" />
    <script type="text/brightscript" uri="pkg:/source/enums/ColorPalette.bs" />

    <interface>
        <field id="mediaItem" type="node" />
        <field id="restoreFocus" type="boolean" alwaysNotify="true" />
    </interface>

    <children>
        <!-- Background color matching Android TV (#111827) -->
        <Rectangle
            width="1920"
            height="1080"
            color="#111827" />

        <!-- Previous backdrop fullscreen (stays visible during transitions) -->
        <Poster id="backdropPrev"
            width="1920"
            height="1080"
            translation="[0, 0]"
            loadDisplayMode="scaleToFill"
            opacity="0.4" />

        <!-- Current backdrop fullscreen -->
        <Poster id="backdrop"
            width="1920"
            height="1080"
            translation="[0, 0]"
            loadDisplayMode="scaleToFill"
            opacity="0.4" />

        <!-- Color tint/scrim overlay for readability - only covers top portion -->
        <Rectangle id="backdropTint"
            width="1920"
            height="800"
            color="#F2000000"
            opacity="0.5" />

        <!-- Scrollable viewport -->
        <Rectangle
            id="scrollViewport"
            width="1920"
            height="1080"
            color="#00000000"
            translation="[0, 0]"
            clippingRect="[0, 0, 1920, 1080]">

            <Group id="scrollContent" translation="[0, 0]">
                <!-- Solid background color covering bottom portion -->
                <Rectangle width="1920" height="1200" translation="[0, 800]" color="#111827" opacity="1.0" />

                <!-- Custom gradient transition from transparent to blue for smooth blending -->
                <Poster
                    width="1920"
                    height="200"
                    translation="[0, 600]"
                    uri="pkg:/images/jellyseerr_gradient.png"
                    loadDisplayMode="scaleToFill"
                    opacity="1.0" />

                <!-- Poster positioned at top left - bigger size -->
                <Group id="posterGroup" translation="[80, 120]">
                    <Rectangle
                        width="450"
                        height="675"
                        color="#1F2937" />
                    <Poster id="poster"
                        width="450"
                        height="675"
                        loadDisplayMode="scaleToFit"
                        failedBitmapUri="pkg:/images/media_type_icons/movie.png" />
                </Group>

                <!-- Title group - positioned to the right of poster -->
                <Group id="titleGroup" translation="[560, 680]">
                    <!-- Status Badge at top - above title -->
                    <Group id="statusBadgeGroup" translation="[0, -40]" visible="false">
                        <Poster id="statusBadgeBg"
                            uri="pkg:/images/icons/navbar.png"
                            width="280"
                            height="32"
                            loadDisplayMode="scaleToFit" />
                        <Label id="statusBadge"
                            width="280"
                            height="32"
                            font="font:TinyBoldSystemFont"
                            color="#FFFFFF"
                            horizAlign="center"
                            vertAlign="center" />
                    </Group>

                    <Label id="titleLabel"
                        width="1280"
                        font="font:LargeBoldSystemFont"
                        color="#FFFFFF"
                        wrap="true"
                        maxLines="2" />

                    <!-- Metadata row (runtime â€¢ genre) -->
                    <Label id="metadataLabel"
                        translation="[0, 70]"
                        width="1280"
                        font="font:MediumSystemFont"
                        color="#D1D5DB" />

                    <!-- Tagline (italic style) -->
                    <Label id="taglineLabel"
                        translation="[0, 100]"
                        width="1280"
                        font="font:MediumSystemFont"
                        color="#9CA3AF"
                        wrap="true"
                        visible="false">
                        <Font role="font" uri="font:ItalicSystemFont" size="24" />
                    </Label>
                </Group>

                <!-- Overview Section -->
                <Group id="overviewGroup" translation="[80, 820]">
                    <Label id="overviewHeading"
                        text="Overview"
                        font="font:MediumBoldSystemFont"
                        color="#D1D5DB" />

                    <Label id="overviewText"
                        translation="[0, 50]"
                        width="1248"
                        font="font:MediumSystemFont"
                        color="#9CA3AF"
                        wrap="true"
                        maxLines="6" />

                    <!-- Metadata facts sidebar (right side of description) -->
                    <Group id="metadataFactsGroup" translation="[1310, 0]">
                        <!-- Facts will be added dynamically -->
                    </Group>
                </Group>

                <!-- Action Buttons - under description -->
                <LayoutGroup id="buttonsGroup"
                    translation="[80, 1040]"
                    layoutDirection="horiz"
                    itemSpacings="[40]" />

                <!-- Cast Section - under buttons -->
                <Group id="castSection" translation="[80, 1180]">
                    <Label id="castHeading"
                        text="Cast"
                        font="font:MediumBoldSystemFont"
                        color="#FFFFFF"
                        visible="false" />

                    <MarkupGrid id="castRow"
                        translation="[0, 40]"
                        visible="false"
                        itemComponentName="JellyseerrCastCard"
                        numRows="1"
                        numColumns="13"
                        itemSize="[250, 330]"
                        itemSpacing="[36, 36]"
                        horizFocusAnimationStyle="fixedFocusWrap"
                        vertFocusAnimationStyle="floatingFocus"
                        drawFocusFeedback="true"
                        drawFocusFeedbackOnTop="true"
                        focusBitmapBlendColor="0xFFFFFFFF" />
                </Group>

                <!-- Similar Content Section -->
                <Group id="similarSection" translation="[80, 1400]">
                    <Label id="similarHeading"
                        text="Similar"
                        font="font:MediumBoldSystemFont"
                        color="#FFFFFF"
                        visible="false" />

                    <RowList id="similarRow"
                        translation="[0, 40]"
                        visible="false"
                        itemComponentName="JellyseerrPoster"
                        numRows="1"
                        itemSize="[1760, 400]"
                        itemSpacing="[0, 0]"
                        drawFocusFeedback="false" />
                </Group>
            </Group>
        </Rectangle>

        <!-- Loading indicator -->
        <Label id="loadingLabel"
            translation="[860, 500]"
            text="Loading..."
            font="font:LargeSystemFont"
            color="#FFFFFF"
            visible="false" />

        <!-- Error message -->
        <Label id="errorLabel"
            translation="[860, 500]"
            font="font:LargeSystemFont"
            color="#EF4444"
            horizAlign="center"
            vertAlign="center"
            visible="false" />

        <!-- Season selection dialog -->
        <JellyseerrSeasonDialog id="seasonDialog" visible="false" />
    </children>
</component>