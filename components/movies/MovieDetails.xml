<?xml version="1.0" encoding="utf-8"?>
<component name="MovieDetails" extends="JFScreen">
  <children>
    <!-- Backdrop for episodes: black background -->
    <Rectangle id="episodeBackgroundBlack" width="1920" height="1080" color="#000000" visible="false" />

    <!-- Backdrop for episodes: blurred episode screenshot -->
    <Poster id="episodeBackdrop" width="1920" height="1080" loadDisplayMode="scaleToFill" opacity="0.4" visible="false" />

    <!-- Tint overlay for episode backdrop readability -->
    <Rectangle id="episodeBackdropTint" width="1920" height="1080" color="#F2000000" opacity="1.0" visible="false" />

    <!-- Movie Logo - positioned absolutely so it doesn't affect layout -->
    <Poster id="movieLogo" visible="false" loadDisplayMode="scaleToFit" width="400" height="200" translation="[1420, 200]" opacity="0.7" />

    <!-- Scrollable content group -->
    <Group id="scrollableContent" translation="[0, 0]">
      <LayoutGroup id="container" layoutDirection="vert" itemSpacings="[20]" translation="[100, 180]">
        <!-- Movie title at top -->
        <Text id="movieTitle" font="font:LargeBoldSystemFont" width="1720" wrap="true" maxLines="2" color="#FFFFFF" />

        <!-- Episode title (for episodes only) -->
        <Text id="episodeTitle" font="font:MediumBoldSystemFont" width="1720" wrap="true" maxLines="1" color="#CCCCCC" visible="false" />

        <!-- Metadata row under title -->
        <LayoutGroup id="metadataRow" layoutDirection="horiz" horizAlignment="left" itemSpacings="[15]">
          <LayoutGroup id="communityRatingGroup" layoutDirection="horiz" itemSpacings="[5]">
            <Poster id="star" uri="pkg:/images/sharp_star_white_18dp.png" height="28" width="28" blendColor="#FFD700" />
            <Text id="communityRating" font="font:MediumSystemFont" color="#CCCCCC" />
          </LayoutGroup>
          <Text id="dot1" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Poster id="criticRatingIcon" height="28" width="28" />
          <Text id="criticRatingLabel" font="font:MediumSystemFont" color="#CCCCCC" />
          <Text id="dot2" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="releaseYear" font="font:MediumSystemFont" color="#CCCCCC" />
          <Text id="dot3" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="officialRating" font="font:MediumBoldSystemFont" color="#CCCCCC" />
          <Text id="dot4" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="videoQuality" font="font:MediumSystemFont" color="#CCCCCC" />
          <Text id="dot5" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="videoCodec" font="font:MediumSystemFont" color="#CCCCCC" />
          <Text id="dot6" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="audioQuality" font="font:MediumSystemFont" color="#CCCCCC" />
          <Text id="dot7" font="font:MediumSystemFont" text="•" color="#CCCCCC" visible="true" />
          <Text id="audioCodec" font="font:MediumSystemFont" color="#CCCCCC" />
        </LayoutGroup>

        <!-- Tagline and Description -->
        <LayoutGroup layoutDirection="vert" itemSpacings="[8]">
          <Text id="tagline" font="font:SmallSystemFont,italic" wrap="true" maxLines="2" width="1248" color="#AAAAAA" />
          <Text id="overview" font="font:SmallSystemFont" wrap="true" width="1248" color="#EEEEEE" />
        </LayoutGroup>

        <!-- Info grid: 2 columns with headers on left, data on right -->
        <LayoutGroup id="infoGrid" layoutDirection="vert" itemSpacings="[12]">
          <!-- Genres row -->
          <LayoutGroup id="genresRow" layoutDirection="horiz" itemSpacings="[40]" visible="false">
            <Rectangle width="150" height="1" color="#00000000">
              <Text id="genresHeader" text="Genres" font="font:MediumSystemFont" color="#888888" width="150" />
            </Rectangle>
            <Text id="genres" font="font:MediumSystemFont" color="#CCCCCC" width="800" wrap="true" maxLines="2" />
          </LayoutGroup>

          <!-- Director row -->
          <LayoutGroup id="directorRow" layoutDirection="horiz" itemSpacings="[40]" visible="false">
            <Rectangle width="150" height="1" color="#00000000">
              <Text id="directorHeader" text="Director" font="font:MediumSystemFont" color="#888888" width="150" />
            </Rectangle>
            <Text id="director" font="font:MediumSystemFont" color="#CCCCCC" width="800" wrap="true" maxLines="2" />
          </LayoutGroup>

          <!-- Writers row -->
          <LayoutGroup id="writersRow" layoutDirection="horiz" itemSpacings="[40]" visible="false">
            <Rectangle width="150" height="1" color="#00000000">
              <Text id="writersHeader" text="Writers" font="font:MediumSystemFont" color="#888888" width="150" />
            </Rectangle>
            <Text id="writers" font="font:MediumSystemFont" color="#CCCCCC" width="800" wrap="true" maxLines="2" />
          </LayoutGroup>

          <!-- Runtime row -->
          <LayoutGroup id="runtimeRow" layoutDirection="horiz" itemSpacings="[40]" visible="false">
            <Rectangle width="150" height="1" color="#00000000">
              <Text id="runsHeader" text="Runs" font="font:MediumSystemFont" color="#888888" width="150" />
            </Rectangle>
            <Text id="runtime" font="font:MediumSystemFont" color="#CCCCCC" width="800" />
          </LayoutGroup>

          <!-- Ends row -->
          <LayoutGroup id="endsRow" layoutDirection="horiz" itemSpacings="[40]" visible="false">
            <Rectangle width="150" height="1" color="#00000000">
              <Text id="endsHeader" text="Ends" font="font:MediumSystemFont" color="#888888" width="150" />
            </Rectangle>
            <Text id="endsAt" font="font:MediumSystemFont" color="#CCCCCC" width="800" />
          </LayoutGroup>
        </LayoutGroup>

        <!-- Dynamic button row - buttons are added programmatically -->
        <Rectangle width="1920" height="120" color="#00000000" translation="[0, 0]">
          <LayoutGroup id="buttonRow" layoutDirection="horiz" itemSpacings="[40]" translation="[960, 10]" horizAlignment="center" />
        </Rectangle>

        <!-- Cast and Crew rows integrated below buttons -->
        <ExtrasRowList id="extrasGrid"
          numRows="2"
          rowFocusAnimationStyle="fixedFocusWrap"
          itemSpacing="[60, 132]"
          rowLabelOffset="[[9, 24]]"
          showRowLabel="true"
          showRowCounter="true"
          visible="true"
          drawFocusFeedback="false"
          itemComponentName="ExtrasItem" />
      </LayoutGroup>
    </Group>

    <AudioSelector id="audioSelector" visible="false" />
    <SubtitleSelector id="subtitleSelector" visible="false" />
    <MovieOptions id="movieOptions" visible="false" />

    <!-- Theme music player -->
    <ThemeMusicPlayer id="themeMusicPlayer" />

    <!-- Task nodes for API calls -->
    <FavoriteItemsTask id="favoriteTask" />
    <PlaystateTask id="playstateTask" />
  </children>
  <interface>
    <field id="buttonSelected" type="string" alwaysNotify="true" />
    <field id="selectedItem" type="node" alwaysNotify="true" />
    <field id="itemContent" type="node" />
    <field id="trailerAvailable" type="bool" value="false" />
    <field id="selectedPart" type="assocarray" onChange="onSelectedPartChanged" />
    <field id="selectedAudioStreamIndex" type="integer" />
    <field id="selectedVideoStreamId" type="string" />
    <field id="quickPlayNode" type="node" alwaysNotify="true" />
    <field id="refreshMovieDetailsData" type="bool" alwaysNotify="true" />
  </interface>
</component>