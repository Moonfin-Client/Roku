<?xml version="1.0" encoding="utf-8"?>
<component name="JFOverhang" extends="Group">
  <script type="text/brightscript" uri="pkg:/source/utils/JellyseerrUtils.bs" />

  <children>
    <LayoutGroup id="overlayLeftGroup" layoutDirection="horiz" translation="[50, 54]" itemSpacings="60">
      <ScrollingText id="overlayTitle" font="font:LargeSystemFont" vertAlign="center" height="64" maxWidth="1100" repeatCount="0" />
    </LayoutGroup>

    <!-- Avatar section - static, left side -->
    <LayoutGroup id="avatarSection" layoutDirection="horiz" itemSpacings="15" translation="[100, 53]">
      <MaskGroup id="backgroundMask" maskUri="pkg:/images/icons/circle64.png" maskSize="[64,64]">
        <Poster uri="pkg:/images/baseline_person_white_48dp.png" id="overlayCurrentUserProfileImage" width="64" height="64" loadDisplayMode="scaleToZoom" />
      </MaskGroup>
      <Text id="overlayCurrentUser" font="font:MediumSystemFont" width="300" horizAlign="left" vertAlign="center" height="64" visible="false" />
    </LayoutGroup>

    <!-- Center scrollable navbar -->
    <!-- Dynamic navbar background with rounded corners -->
    <Poster
      id="navbarBackground"
      translation="[506, 40]"
      width="917"
      height="80"
      uri="pkg:/images/icons/navbar.png"
      loadDisplayMode="scaleToFit"
    />
    <Group id="centerNavContainer" translation="[506, 46]">
      <!-- Clipping area for scrollable content -->
      <Group id="navClipGroup" translation="[0, 0]" clippingRect="[0, 0, 907, 70]">
        <!-- Scrollable navigation group -->
        <LayoutGroup id="navGroup" layoutDirection="horiz" itemSpacings="43" translation="[20, 3]" focusable="true">
          <!-- Home icon -->
          <Poster id="homeIcon" uri="pkg:/images/icons/home.png" width="60" height="60" translation="[4, -4]" loadDisplayMode="scaleToFit" opacity="0.5" />

          <!-- Search icon -->
          <Poster id="searchIcon" uri="pkg:/images/icons/search-light.png" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" />

          <!-- Shuffle icon -->
          <Poster id="shuffleIcon" uri="pkg:/images/icons/shuffle.png" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" blendColor="#FFFFFF" />

          <!-- Favorites icon -->
          <Poster id="favoritesIcon" uri="pkg:/images/icons/heart.png" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" blendColor="#FFFFFF" />

          <!-- Genres icon -->
          <Poster id="genresIcon" uri="pkg:/images/icons/masks.png" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" blendColor="#FFFFFF" />

          <!-- Jellyseerr icon -->
          <Poster id="jellyseerrIcon" uri="pkg:/images/icons/jellyseer_jellyfish.png" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" visible="false" />

          <!-- Library labels will be added dynamically here -->
          <LayoutGroup id="libraryLabelsGroup" layoutDirection="horiz" itemSpacings="43" />
        </LayoutGroup>
      </Group>
    </Group>

    <!-- Right section: Settings + Clock (static) -->
    <Poster id="settingsIcon" uri="pkg:/images/icons/settings.png" translation="[1630, 48]" width="50" height="50" loadDisplayMode="scaleToFit" opacity="0.5" />
    <Clock id="overlayClock" translation="[1630, 45]" />

    <!-- Scroll indicators -->
    <Poster id="scrollLeftIndicator" uri="pkg:/images/icons/up_white.png" translation="[486, 60]" width="20" height="20" rotation="-1.5708" opacity="0.0" visible="false" />
    <Poster id="scrollRightIndicator" uri="pkg:/images/icons/up_white.png" translation="[1433, 60]" width="20" height="20" rotation="1.5708" opacity="0.0" visible="false" />

    <!-- Avatar selection highlight overlay (positioned separately) -->
    <Poster visible="false" uri="pkg:/images/icons/openCircle.png" id="overlayCurrentUserSelection" translation="[100, 53]" width="64" height="64" loadDisplayMode="scaleToZoom" />

    <Timer id="currentTimeTimer" repeat="true" duration="60" />

    <Animation id="slideUp" duration=".5" repeat="false">
      <!-- Vector2DFieldInterpolator key="[0.0, .5]" keyValue="[[54, 0], [54, -200]]" fieldToInterp="JFOverhang.translation" / -->
    </Animation>

    <Animation id="slideDown" delay=".2" duration=".5" repeat="false">
      <!-- Vector2DFieldInterpolator key="[0.0, .5]" keyValue="[[54, -200], [54, 0]]" fieldToInterp="JFOverhang.translation" / -->
    </Animation>

    <!-- Smooth scroll animation for nav group -->
    <Animation id="navScrollAnim" duration="0.15" repeat="false" easeFunction="outCubic">
      <Vector2DFieldInterpolator id="navScrollInterp" key="[0.0, 1.0]" fieldToInterp="navGroup.translation" />
    </Animation>
  </children>
  <interface>
    <function name="highlightUser" />
    <function name="dehighlightUser" />
    <function name="updateShuffleButtonVisibility" />
    <function name="loadLibraries" />
    <field id="id" type="string" />
    <field id="currentUserProfileImage" type="string" onChange="updateUserProfileImage" />
    <field id="currentUser" type="string" onChange="updateUser" />
    <field id="title" type="string" onChange="updateTitle" />
    <field id="showOptions" value="true" type="boolean" onChange="updateOptions" />
    <field id="itemSelected" type="string" alwaysNotify="true" />
    <field id="librarySelected" type="node" alwaysNotify="true" />
    <field id="isVisible" value="true" type="boolean" onChange="onVisibleChange" />
    <field id="disableMoveAnimation" value="false" type="boolean" />
    <field id="shufflePressed" type="boolean" alwaysNotify="true" />
    <field id="favoritesPressed" type="boolean" alwaysNotify="true" />
    <field id="genresPressed" type="boolean" alwaysNotify="true" />
  </interface>
</component>