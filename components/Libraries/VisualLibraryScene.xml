<?xml version="1.0" encoding="utf-8"?>
<component name="VisualLibraryScene" extends="JFScreen">
  <children>
    <!-- Dark background -->
    <Rectangle width="1920" height="1080" color="#000018" />

    <!-- Header: Library name (centered) + item count -->
    <Text id="libraryName" translation="[0, 15]" width="1920" horizAlign="center"
      font="font:LargeBoldSystemFont" color="#ffffff" />
    <Text id="itemCount" translation="[0, 22]" width="1840" horizAlign="right"
      font="font:SmallSystemFont" color="#aaaaaa" />

    <!-- Selected item title -->
    <Text id="selectedItemName" translation="[80, 60]" font="font:MediumBoldSystemFont"
      width="1760" color="#ffffff" />

    <!-- Metadata row -->
    <LayoutGroup layoutDirection="horiz" translation="[80, 95]" itemSpacings="[24]" id="infoGroup">
      <Text id="selectedItemProductionYear" font="font:SmallestSystemFont" color="#aaaaaa" />
      <Text id="selectedItemOfficialRating" font="font:SmallestSystemFont" color="#aaaaaa" />
      <Text id="runtime" font="font:SmallestSystemFont" color="#aaaaaa" />

      <LayoutGroup id="communityRatingGroup" visible="false" layoutDirection="horiz" itemSpacings="[-5]">
        <Poster id="star" uri="pkg:/images/sharp_star_white_18dp.png" height="24" width="24" blendColor="#FFD700" />
        <Text id="communityRating" font="font:SmallestSystemFont" color="#aaaaaa" />
      </LayoutGroup>

      <LayoutGroup layoutDirection="horiz" id="criticRatingGroup" visible="false" itemSpacings="[4]">
        <Poster id="criticRatingIcon" height="24" width="24" />
        <Text id="criticRatingLabel" font="font:SmallestSystemFont" color="#aaaaaa" />
      </LayoutGroup>
    </LayoutGroup>

    <!-- Toolbar: Icon buttons on the left -->
    <IconButton id="homeButton" translation="[80, 130]"
      icon="pkg:/images/icons/home.png" height="44" width="44" padding="4"
      background="0x00000000" focusBackground="#555555" />
    <IconButton id="sortButton" translation="[142, 130]"
      icon="pkg:/images/icons/sort_by_alpha.png" height="44" width="44" padding="4"
      background="0x00000000" focusBackground="#555555" />
    <IconButton id="settingsButton" translation="[204, 130]"
      icon="pkg:/images/icons/settings.png" height="44" width="44" padding="4"
      background="0x00000000" focusBackground="#555555" />

    <!-- Horizontal alpha picker on the right -->
    <HorizontalAlphaPicker id="alphaPicker" translation="[660, 137]" />

    <!-- Main item grid -->
    <MarkupGrid
      id="itemGrid"
      itemComponentName="GridItemSmall"
      vertFocusAnimationStyle="fixed"
      translation="[80, 195]"
      clippingRect="[-30, -10, 1880, 850]"
      drawFocusFeedback="true"
      focusBitmapUri="pkg:/images/hd_focus.9.png"
      numColumns="7"
      numRows="3"
      itemSize="[230, 350]"
      rowHeights="[350]"
      itemSpacing="[20, 20]" />

    <!-- Genre card grid (hidden by default) -->
    <MarkupGrid
      id="genreGrid"
      itemComponentName="GenreCard"
      vertFocusAnimationStyle="fixed"
      opacity="0"
      translation="[80, 195]"
      clippingRect="[-30, -10, 1880, 850]"
      drawFocusFeedback="true"
      numColumns="4"
      numRows="3"
      itemSize="[418, 235]"
      rowHeights="[235]"
      itemSpacing="[40, 30]" />

    <!-- Empty text message -->
    <Text translation="[0, 540]" id="emptyText" font="font:LargeSystemFont"
      width="1920" horizAlign="center" vertAlign="center" height="64"
      visible="false" color="#aaaaaa" />

    <!-- Status bar -->
    <Text id="statusText" translation="[80, 1046]" font="font:SmallestSystemFont"
      color="#666666" width="1400" />
    <Text id="paginationText" translation="[0, 1046]" font="font:SmallestSystemFont"
      color="#666666" width="1840" horizAlign="right" />

    <!-- Sort & Filter dialog (hidden) -->
    <SortFilterDialog id="options" visible="false" />
  </children>
  <interface>
    <function name="getItemFocused" />
    <function name="redrawItems" />
    <field id="mediaType" type="string" />
    <field id="parentItem" type="node" onChange="loadInitialItems" />
    <field id="selectedItem" type="node" alwaysNotify="true" />
    <field id="quickPlayNode" type="node" alwaysNotify="true" />
    <field id="imageDisplayMode" type="string" value="" />
    <field id="alphaSelected" type="string" alias="alphaPicker.letterSelected" onChange="alphaSelectedChanged" alwaysNotify="true" />
    <field id="searchTerm" type="string" onChange="onSearchTermChanged" alwaysNotify="true" />
    <field id="alphaActive" type="boolean" value="false" />
    <field id="showItemTitles" type="string" value="" />
    <field id="genreFilter" type="assocarray" />
  </interface>
</component>