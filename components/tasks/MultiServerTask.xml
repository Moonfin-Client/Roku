<?xml version="1.0" encoding="utf-8"?>

<!-- MultiServerTask: Execute API calls across multiple Jellyfin servers in parallel
     
     This task enables multi-server content aggregation by:
     1. Taking a list of ServerUserSession objects
     2. Making the same API call to each server
     3. Aggregating results with server metadata attached
     
     Usage:
       task = CreateObject("roSGNode", "MultiServerTask")
       task.sessions = getAllServerSessions()  ' from multiserver.bs
       task.endpoint = "/Users/{userId}/Items/Latest"
       task.params = { "limit": 25, "enableImages": true }
       task.observeField("results", "onMultiServerResults")
       task.control = "RUN"
-->
<component name="MultiServerTask" extends="Task">
    <interface>
        <field id="sessions" type="array" value="[]" />
        <field id="endpoint" type="string" value="" />
        <field id="params" type="assocarray" value="{}" />
        <field id="requestType" type="string" value="GET" />
        <field id="requestBody" type="assocarray" value="{}" />
        <field id="timeoutSeconds" type="integer" value="30" />

        <field id="results" type="array" value="[]" />
        <field id="isComplete" type="boolean" value="false" />
        <field id="errors" type="array" value="[]" />

        <function name="reset" />
    </interface>
</component>